<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detaylar | Finans Takip</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="main-header">
    <h1>📋 Detaylı Takip</h1>
    <button onclick="window.location.href='index.html'">🏠 Ana Sayfa</button>
  </header>

  <div class="app-container">

    <!-- Maaş Belirleme -->
    <section>
      <h2>Maaş Bilgisi</h2>
      <input type="number" id="salaryInput" placeholder="Maaş (₺)" />
      <button onclick="saveSalary()">Kaydet</button>
    </section>

    <!-- Gider Girişi -->
    <section>
      <h2>Gider Ekle</h2>
      <input type="text" id="expenseNote" placeholder="Açıklama" />
      <input type="number" id="expenseAmount" placeholder="Tutar (₺)" />
      <button onclick="addExpense()">Ekle</button>

      <ul id="expenseList"></ul>
    </section>

    <!-- Borç/Taksit Girişi -->
    <section>
      <h2>Borç / Taksit Ekle</h2>
      <input type="text" id="debtTitle" placeholder="Başlık" />
      <input type="number" id="debtAmount" placeholder="Tutar (₺)" />
      <input type="date" id="debtDate" />
      <button onclick="addDebt()">Ekle</button>

      <ul id="debtList"></ul>
    </section>
  </div>

  <script>
    // Maaş kaydet
    function saveSalary() {
      const salary = parseFloat(document.getElementById("salaryInput").value);
      if (!isNaN(salary)) {
        localStorage.setItem("salary", salary);
        alert("Maaş kaydedildi!");
        document.getElementById("salaryInput").value = "";
      }
    }

    // Gider işlemleri
    function addExpense() {
      const note = document.getElementById("expenseNote").value;
      const amount = parseFloat(document.getElementById("expenseAmount").value);

      if (!note || isNaN(amount)) return;

      const expenses = JSON.parse(localStorage.getItem("expenses")) || [];
      expenses.push({ note, amount: parseFloat(amount.toFixed(2)) });
      localStorage.setItem("expenses", JSON.stringify(expenses));

      document.getElementById("expenseNote").value = "";
      document.getElementById("expenseAmount").value = "";
      loadExpenses();
    }

    function loadExpenses() {
      const expenses = JSON.parse(localStorage.getItem("expenses")) || [];
      const list = document.getElementById("expenseList");
      list.innerHTML = "";
      expenses.forEach((e, i) => {
        const li = document.createElement("li");
        li.innerHTML = `${e.note} - ${e.amount} ₺ <button onclick="deleteExpense(${i})">❌</button>`;
        list.appendChild(li);
      });
    }

    function deleteExpense(index) {
      const expenses = JSON.parse(localStorage.getItem("expenses")) || [];
      expenses.splice(index, 1);
      localStorage.setItem("expenses", JSON.stringify(expenses));
      loadExpenses();
    }

    // Borç işlemleri
    function addDebt() {
      const title = document.getElementById("debtTitle").value;
      const amount = parseFloat(document.getElementById("debtAmount").value);
      const dueDate = document.getElementById("debtDate").value;

      if (!title || isNaN(amount) || !dueDate) return;

      const debts = JSON.parse(localStorage.getItem("debts")) || [];
      debts.push({ title, amount: parseFloat(amount.toFixed(2)), dueDate });
      localStorage.setItem("debts", JSON.stringify(debts));

      document.getElementById("debtTitle").value = "";
      document.getElementById("debtAmount").value = "";
      document.getElementById("debtDate").value = "";
      loadDebts();
    }

    function loadDebts() {
      const debts = JSON.parse(localStorage.getItem("debts")) || [];
      const list = document.getElementById("debtList");
      list.innerHTML = "";
      debts.forEach((d, i) => {
        const li = document.createElement("li");
        li.innerHTML = `${d.title} - ${d.amount} ₺ - ${d.dueDate} <button onclick="deleteDebt(${i})">❌</button>`;
        list.appendChild(li);
      });
    }

    function deleteDebt(index) {
      const debts = JSON.parse(localStorage.getItem("debts")) || [];
      debts.splice(index, 1);
      localStorage.setItem("debts", JSON.stringify(debts));
      loadDebts();
    }

    document.addEventListener("DOMContentLoaded", () => {
      if (document.getElementById("expenseList")) loadExpenses();
      if (document.getElementById("debtList")) loadDebts();
    });
  </script>
</body>
</html>